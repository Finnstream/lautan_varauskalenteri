<!doctype html>
<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Saunalautta Kotkajärvi</title>

    <!-- Tailwind: utility-tyylikirjasto, nopea ulkoasun rakentaminen -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Perustyylit ja input -->
    <style>
      html { scroll-behavior: smooth; overscroll-behavior: none; }
      body { overscroll-behavior: none; }
      .input {
        width: 100%; border-radius: 0.75rem; border: 1px solid rgb(226 232 240);
        padding: 0.75rem 0.875rem; outline: none;
      }
      .input:focus { box-shadow: 0 0 0 2px rgb(15 23 42); }
    </style>

    <!-- React: komponenttipohjainen käyttöliittymä -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <!-- ReactDOM: renderöi React-komponentit selaimeen -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel: muuntaa JSX:n selainymmärrykseen -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-white">
    <!-- React-sovellus kiinnittyy tähän -->
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
      const { useEffect, useState } = React;

      // Logo: näyttää logon
      function Logo() {
        return (
          <div className="relative h-20 w-20">
            <img
              src="logo.png"
              alt="Logo"
              className="h-full w-full"
              style={{ display: 'block', objectFit: 'contain' }}
            />
          </div>
        );
      }

      // TopBar: yhteystiedot oranssissa yläpalkissa
      function TopBar() {
        return (
          <div className="w-full bg-gradient-to-r from-rose-500 via-orange-500 to-yellow-400 text-white text-sm font-semibold text-center py-2">
            Ota yhteyttä:
            <a href="mailto:lautta@gmail.com" className="underline hover:text-yellow-100 ml-1">
              lautta@gmail.com
            </a>
          </div>
        );
      }

      // Header: yläpalkki ja päävalikko
      function Header({ atTop, activeSection, setActiveSection }) {
        const navItems = [
          { id: "varaus", label: "Varaa risteily" },
          { id: "hinnasto", label: "Hinnasto" },
          { id: "saannot", label: "Säännöt" },
          { id: "tarina", label: "Tarina" },
          { id: "galleria", label: "Galleria" },
        ];

        const handleNavClick = (e, id) => {
          e.preventDefault();
          const el = document.getElementById(id);
          if (!el) return;
          const headerOffset = 120;
          const rect = el.getBoundingClientRect();
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const top = rect.top + scrollTop - headerOffset;
          window.scrollTo({ top, behavior: "smooth" });
          history.replaceState(null, "", `#${id}`);
          setActiveSection(id);
        };

        // UUSI: logo scrollaa ylös, ei lataa sivua
        const handleLogoClick = (e) => {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: "smooth" });
          history.replaceState(null, "", "#");
          setActiveSection(null);
        };

        return (
          <header
            className={`fixed inset-x-0 z-50 transition-all
      ${atTop
        ? "top-[40px] md:top-[45px] bg-transparent text-white"
        : "top-0 bg-white/50 backdrop-blur text-slate-900"
      }`}
          >
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <div className="flex flex-row flex-wrap items-center h-[96px] py-0 gap-2 md:gap-8 justify-center md:justify-between">
                {/* Logo ja teksti vierekkäin aina */}
                <button
                  onClick={handleLogoClick}
                  className="flex items-center mx-auto md:mx-0 cursor-pointer"
                  title="Palaa kotisivulle"
                  style={{ background: "none", border: "none", padding: 0 }}
                >
                  <Logo />
                  <div className="text-center drop-shadow ml-2">
                    <div className="text-xl font-extrabold tracking-tight">SAUNALAUTTA</div>
                    <div className="-mt-1 text-sm font-semibold">KOTKAJÄRVI</div>
                  </div>
                </button>
                {/* Menu vain desktopissa */}
                <nav className="hidden md:flex md:flex-row md:gap-4 ml-8">
                  {navItems.map((item) => {
                    const isActive = activeSection === item.id;
                    return (
                      <a
                        key={item.id}
                        href={`#${item.id}`}
                        onClick={(e) => handleNavClick(e, item.id)}
                        className={`px-6 py-2 rounded-full border border-white/40 shadow-sm transition-colors duration-200 font-semibold text-center
${isActive
  ? atTop
    ? "bg-white/40 backdrop-blur-xl border border-white/60 shadow-lg text-slate-900"
    : "bg-slate-900/30 backdrop-blur-xl border border-slate-900/40 shadow-lg text-white"
  : atTop
  ? "text-white hover:bg-white/30 hover:backdrop-blur-xl hover:border-white/60"
  : "text-slate-900 hover:bg-white/40 hover:backdrop-blur-xl hover:border-slate-900/40"
}
`}
                      >
                        {item.label}
                      </a>
                    );
                  })}
                </nav>
                {/* Kielet vain desktopissa */}
                <div className="hidden md:flex items-center gap-4 transition-opacity shrink-0 ml-4">
                  <button className="lang">FI</button>
                  <button className="lang">EN</button>
                </div>
              </div>
            </div>
          </header>
        );
      }

      // Hero: iso kuva ja pääotsikko
      function Hero() {
        return (
          <section className="relative h-[68vh] min-h-[520px] w-full">
            <div className="absolute inset-0 -z-10 overflow-hidden">
              <video
                className="h-full w-full object-cover"
                autoPlay
                muted
                loop
                playsInline
                poster='tausta.png'
              >
                <source src='tausta.png' />
              </video>
              <div className="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-white" />
            </div>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-end pb-14">
              <div className="text-white drop-shadow">
                <h1 className="text-4xl sm:text-5xl font-extrabold tracking-tight">
                  Varaa Ainutlaatuinen Saunalauttaristeily Kotkajärvellä
                </h1>
                <p className="mt-3 max-w-2xl text-white/90 drop-shadow-[0_2px_4px_rgba(0,0,0,0.9)]">
                  Nauti järven rauhasta, lämpimästä saunasta ja hyvästä seurasta. Elämys, jota et unohda!
                </p>
              </div>
            </div>
          </section>
        );
      }

      // Section: otsikko + sisältölohkot
      function Section({ id, title, children }) {
        return (
          <section id={id} className="scroll-mt-32 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
            <h2 className="text-3xl font-extrabold tracking-tight mb-8">{title}</h2>
            <div className="rounded-2xl border border-slate-200 shadow-sm p-8 bg-white/60 backdrop-blur-sm">
              {children}
            </div>
          </section>
        );
      }

      // Footer: alatunniste ja yhteystiedot
      function Footer() {
        const year = new Date().getFullYear();
        return (
          <footer className="border-t border-slate-200 bg-white/70 backdrop-blur py-6 mt-20">
            <div className="max-w-7xl mx-auto px-6 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-slate-600">
              {/* Vasemmalle linkki */}
              <div className="flex items-center gap-3">
                <a href="#" className="underline hover:text-slate-900">
                  Tietosuojaseloste
                </a>
              </div>

              {/* Keskellä yhteystiedot ja vuosiluku */}
              <div className="text-center sm:text-left">
                © {year} Saunalautta Kotkajärvi ·{" "}
                <a href="mailto:lautta@gmail.com" className="underline hover:text-slate-900">
                  lautta@gmail.com
                </a>{" "}
                · puh. 040 123 4567
              </div>

              {/* Oikealla placeholder-logo */}
              <div className="flex items-center justify-center">
                <img
                  src="logo.png"
                  alt="Logo"
                  className="h-14 w-14"
                  style={{ display: 'block', objectFit: 'contain' }}
                />
              </div>
            </div>
          </footer>
        );
      }

      // Gallery: kuvagalleria ja modal
      function Gallery({ modalIdx, setModalIdx }) {
        // Omat valokuvat kuvat kansiossa, määritetty kuvien määrä komennolla length. Kuvissa täytyy olla kuva1.jpeg nimi
        const images = Array.from({ length: 13 }, (_, i) => `/lautan_varauskalenteri/kuvat/kuva${i + 1}.jpeg`);

        const shuffled = React.useMemo(() => images.slice().sort(() => 0.5 - Math.random()), []);

        React.useEffect(() => {
          if (modalIdx === null) return;
          const handleKey = (e) => {
            if (e.key === "ArrowRight") {
              setModalIdx((idx) => (idx + 1) % shuffled.length);
            } else if (e.key === "ArrowLeft") {
              setModalIdx((idx) => (idx - 1 + shuffled.length) % shuffled.length);
            } else if (e.key === "Escape") {
              setModalIdx(null);
            }
          };
          window.addEventListener("keydown", handleKey);
          return () => window.removeEventListener("keydown", handleKey);
        }, [modalIdx, shuffled.length, setModalIdx]);

        return (
          <section className="max-w-6xl mx-auto px-1 sm:px-6 lg:px-8 py-8">
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
              {shuffled.map((src, i) => (
                <button
                  key={i}
                  className="rounded-xl overflow-hidden shadow-lg bg-white/60 backdrop-blur-sm border border-slate-200 focus:outline-none"
                  onClick={() => setModalIdx(i)}
                  style={{ cursor: "zoom-in" }}
                  aria-label="Näytä suurempana"
                >
                  <img
                    src={src}
                    alt={`Gallery ${i + 1}`}
                    className="w-full h-40 object-cover transition-transform duration-300 hover:scale-105 md:aspect-auto aspect-video"
                    loading="lazy"
                  />
                </button>
              ))}
            </div>
            {modalIdx !== null && (
              <div
                className="fixed inset-0 z-[999] flex items-center justify-center bg-black/80 backdrop-blur-sm"
                onClick={() => setModalIdx(null)}
                style={{ cursor: "pointer" }}
              >
                <button
                  className="absolute top-8 right-8 text-white text-3xl font-bold bg-black/40 rounded-full px-4 py-2 hover:bg-black/70"
                  onClick={(e) => { e.stopPropagation(); setModalIdx(null); }}
                  aria-label="Sulje"
                >
                  ×
                </button>
                <button
                  className="absolute left-4 md:left-12 top-1/2 -translate-y-1/2 text-white text-4xl font-bold bg-black/40 rounded-full px-3 py-2 hover:bg-black/70"
                  onClick={(e) => { e.stopPropagation(); setModalIdx((idx) => (idx - 1 + shuffled.length) % shuffled.length); }}
                  aria-label="Edellinen kuva"
                >
                  &#8592;
                </button>
                <img
                  src={shuffled[modalIdx]}
                  alt="Suuri kuva"
                  className="w-auto h-auto max-w-[98vw] max-h-[98vh] object-contain rounded-2xl shadow-2xl border-4 border-white bg-transparent"
                  style={{
                    display: "block",
                    margin: "auto",
                  }}
                  onClick={e => e.stopPropagation()}
                />
                <button
                  className="absolute right-4 md:right-12 top-1/2 -translate-y-1/2 text-white text-4xl font-bold bg-black/40 rounded-full px-3 py-2 hover:bg-black/70"
                  onClick={(e) => { e.stopPropagation(); setModalIdx((idx) => (idx + 1) % shuffled.length); }}
                  aria-label="Seuraava kuva"
                >
                  &#8594;
                </button>
              </div>
            )}
          </section>
        );
      }

      // ReservationPage: koko sivun runko
      function ReservationPage() {
        const [atTop, setAtTop] = useState(true);
        const [activeSection, setActiveSection] = useState(null);
        const [modalIdx, setModalIdx] = useState(null);

        useEffect(() => {
          const handleScroll = () => {
            const headerOffset = 120;
            const y = window.scrollY || window.pageYOffset;
            setAtTop(y < 40);

            const sections = Array.from(document.querySelectorAll("section[id]"));
            let current = null;

            for (const section of sections) {
              const top = section.offsetTop - headerOffset;
              const height = section.offsetHeight;
              if (y >= top && y < top + height) {
                current = section.getAttribute("id");
                break;
              }
            }

            setActiveSection(current);
          };

          window.addEventListener("scroll", handleScroll, { passive: true });
          handleScroll();
          return () => window.removeEventListener("scroll", handleScroll);
        }, []);

        const navItems = [
          { id: "varaus", label: "Varaa risteily" },
          { id: "hinnasto", label: "Hinnasto" },
          { id: "saannot", label: "Säännöt" },
          { id: "tarina", label: "Tarina" },
          { id: "galleria", label: "Galleria" },
        ];

        const handleNavClick = (e, id) => {
          e.preventDefault();
          const el = document.getElementById(id);
          if (!el) return;
          const headerOffset = 120;
          const rect = el.getBoundingClientRect();
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const top = rect.top + scrollTop - headerOffset;
          window.scrollTo({ top, behavior: "smooth" });
          history.replaceState(null, "", `#${id}`);
          setActiveSection(id);
        };

        return (
          <div className="min-h-screen text-slate-900 flex flex-col">
            {modalIdx === null && (
              <>
                <TopBar />
                {/* Mobiilissa: valikko näkyy kiinteänä oranssin palkin alla, vain md-kokoon asti */}
                {atTop && (
                  <nav className="fixed top-[136px] left-0 right-0 z-40 md:hidden flex justify-center pointer-events-auto">
                    <div className="grid grid-cols-2 gap-3 w-full max-w-xs mx-auto mt-2">
                      {navItems.map((item) => {
                        const isActive = activeSection === item.id;
                        return (
                          <a
                            key={item.id}
                            href={`#${item.id}`}
                            onClick={(e) => handleNavClick(e, item.id)}
                            className={`px-6 py-2 rounded-full border border-white/40 shadow-sm transition-colors duration-200 font-semibold text-center
${isActive
  ? atTop
    ? "bg-white/40 backdrop-blur-xl border border-white/60 shadow-lg text-slate-900"
    : "bg-slate-900/30 backdrop-blur-xl border border-slate-900/40 shadow-lg text-white"
  : atTop
  ? "text-white hover:bg-white/30 hover:backdrop-blur-xl hover:border-white/60"
  : "text-slate-900 hover:bg-white/40 hover:backdrop-blur-xl hover:border-slate-900/40"
}
`}
                          >
                            {item.label}
                          </a>
                        );
                      })}
                    </div>
                  </nav>
                )}
                {/* Mobiilissa: Header siirtyy alemmas, valikko piilossa */}
                <Header
                  atTop={atTop}
                  activeSection={activeSection}
                  setActiveSection={setActiveSection}
                />
              </>
            )}
            <Hero />
            <main className="relative z-10 bg-white flex-grow">
              <Section id="varaus" title="Varaa risteily">
                {/* Varauslomake, muokkaa kenttiä ja Formspree-osoite */}
                <form
                  action="https://formspree.io/f/myzndywa" // <-- Muokkaa tähän oma Formspree-osoite
                  method="POST"
                  className="grid gap-6 sm:grid-cols-2"
                >
                  <label className="block">
                    <span className="text-sm font-medium text-slate-700 mb-2 block">Henkilömäärä</span>
                    <input
                      type="number"
                      name="henkilomaara"
                      min={1}
                      className="input"
                      placeholder="Esim. 4"
                      required
                    />
                  </label>

                  <label className="block">
                    <span className="text-sm font-medium text-slate-700 mb-2 block">Päivämäärä</span>
                    <input
                      type="date"
                      name="paivamaara"
                      className="input"
                      required
                    />
                  </label>

                  <label className="block">
                    <span className="text-sm font-medium text-slate-700 mb-2 block">Kellonaika</span>
                    <input
                      type="time"
                      name="kellonaika"
                      className="input"
                      required
                    />
                  </label>

                  <label className="block">
                    <span className="text-sm font-medium text-slate-700 mb-2 block">Sähköposti</span>
                    <input
                      type="email"
                      name="sahkoposti"
                      className="input"
                      placeholder="nimi@esimerkki.fi"
                      required
                    />
                  </label>

                  <div className="sm:col-span-2">
                    <label className="block text-sm font-medium text-slate-700 mb-2">
                      Erityistarpeet / Lisätiedot
                    </label>
                    <textarea
                      name="lisatiedot"
                      className="w-full rounded-xl border border-slate-300 p-3 focus:outline-none focus:ring-2 focus:ring-slate-900"
                      rows={5}
                      placeholder="Allergiat, esteettömyys, tarjoilutoiveet tms."
                    />
                  </div>

                  <div className="sm:col-span-2">
                    <button
                      type="submit"
                      className="bg-slate-900 text-white px-6 py-3 rounded-xl hover:bg-slate-800 transition"
                    >
                      Lähetä
                    </button>
                  </div>
                </form>
              </Section>

              <Section id="hinnasto" title="Hinnasto">
                <ul className="text-slate-700 leading-relaxed list-disc pl-6">
                  <li>Perusristeily (2h): <strong>180 €</strong> (sis. sauna, kapteeni, polttoaineet)</li>
                  <li>Lisätunti: <strong>60 € / h</strong></li>
                  <li>Lapset alle 12v: <strong>ilmaiseksi</strong> aikuisen seurassa</li>
                  <li>Ruoka- ja juomatarjoilu: <strong>pyydä tarjous</strong></li>
                  <li>Max. 10 hlö / risteily</li>
                </ul>
                <p className="text-slate-700 mt-4">
                  <strong>Ma–Su:</strong> 10:00–22:00 <br />
                  Risteilyt varattavissa aina säävarauksella. Varaathan aikasi ajoissa!
                </p>
              </Section>

              <Section id="saannot" title="Säännöt">
                <ul className="text-slate-700 leading-relaxed list-disc pl-6">
                  <li>Kaikki osallistujat käyttävät pelastusliivejä laiturilta poistuttaessa.</li>
                  <li>Omien alkoholijuomien tuonti sallittu kohtuudella.</li>
                  <li>Saunominen tapahtuu omalla vastuulla.</li>
                  <li>Uiminen vain lautan ollessa ankkurissa ja kapteenin luvalla.</li>
                  <li>Roskaaminen kielletty – pidetään järvi puhtaana!</li>
                  <li>Kapteenin ohjeita tulee noudattaa koko risteilyn ajan.</li>
                </ul>
              </Section>

              <Section id="tarina" title="Tarina">
                <p className="text-slate-700 leading-relaxed">
                  Saunalautta Kotkajärvi sai alkunsa intohimosta suomalaiseen järviluontoon ja saunakulttuuriin.
                  Lautta rakennettiin talkoovoimin vuonna 2024, ja siitä lähtien olemme tarjonneet unohtumattomia elämyksiä ystäville, perheille ja yrityksille.
                  Tavoitteenamme on tarjota rentouttava hetki luonnon rauhassa – yhdistäen perinteisen saunan, puhtaan järvi-ilman ja hyvän seuran.
                  Tervetuloa kokemaan Kotkajärven ainutlaatuinen tunnelma!
                </p>
              </Section>

              <Section id="galleria" title="Galleria">
                <Gallery modalIdx={modalIdx} setModalIdx={setModalIdx} />
              </Section>
            </main>
            <Footer />
          </div>
        );
      }

      // Sovelluksen käynnistys
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<ReservationPage />);
    </script>
  </body>
</html>
